{% extends "base.html" %}

{% block title %}My Events{% endblock %}

{% block content %}
<div class="events-header">
    <h1>My Events</h1>
    <a href="{{ url_for('create_event') }}" class="btn">Create New Event</a>
</div>

{% if events %}
<div class="events-grid">
    {% for event in events %}
    <div class="event-card">
        <div class="event-header">
            <h3>{{ event.title }}</h3>
            <span class="event-type">{{ event.event_type|title }}</span>
        </div>
        <div class="event-details">
            <p><strong>Date:</strong> {{ event.date.strftime('%B %d, %Y at %I:%M %p') }}</p>
            <p><strong>Location:</strong> {{ event.location }}</p>
            <p><strong>Status:</strong> <span class="status-{{ event.status }}">{{ event.status|title }}</span></p>
            {% if event.max_participants %}
            <p><strong>Participants:</strong> {{ event.current_participants }}/{{ event.max_participants }}</p>
            {% endif %}
        </div>
        <div class="event-description">
            <p>{{ event.description[:100] }}{% if event.description|length > 100 %}...{% endif %}</p>
        </div>
        <div class="event-actions">
            <a href="{{ url_for('view_event', event_id=event.id) }}" class="btn-small">View</a>
            <a href="{{ url_for('edit_event', event_id=event.id) }}" class="btn-small">Edit</a>
            <form method="POST" action="{{ url_for('delete_event', event_id=event.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this event?')">
                <button type="submit" class="btn-small btn-danger">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="no-events">
    <h2>No Events Found</h2>
    <p>You haven't created any events yet. <a href="{{ url_for('create_event') }}">Create your first event!</a></p>
</div>
{% endif %}

<div class="back-link">
    <a href="{{ url_for('home') }}">← Back to Home</a>
</div>
{% endblock %}
